(this.webpackJsonpmessagelistapp=this.webpackJsonpmessagelistapp||[]).push([[0],{25:function(e,t,s){},46:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(19),i=s.n(n),o=(s(25),s(4)),l=s(8),d=s(6),r=s(2),u=s(20),j="https://message-list.appspot.com",b=s.n(u).a.create({baseURL:"".concat(j,"/messages")}),m=s(0),O=function(e){var t=Object(a.useState)(e.author),s=Object(r.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)(e.content),o=Object(r.a)(i,2),l=o[0],d=o[1];return Object(m.jsx)("div",{id:"myModal",className:"modal",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsx)("span",{className:"material-icons close",onClick:function(){return e.toggleModal({hideOnly:!0})},children:"close"}),Object(m.jsx)("div",{className:"modal-header",children:Object(m.jsx)("h2",{children:e.isDelete?"Delete Message":"Edit Message"})}),e.isDelete?Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("h4",{children:"Are You Sure You Want To Delete This Message?"})}):Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("div",{className:"input-box",children:Object(m.jsx)("input",{placeholder:"Edit Author Name",value:c,onChange:function(e){return n(e.target.value)}})}),Object(m.jsx)("div",{className:"input-box",children:Object(m.jsx)("textarea",{placeholder:"Edit Content",rows:"8",cols:"400",value:l,onChange:function(e){return d(e.target.value)}})})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{onClick:function(){e.isDelete?e.toggleModal({delete:!0}):e.toggleModal({content:l,author:c})},children:"Submit"})})]})})},h={getUpdatedDays:function(e){var t=((new Date).getTime()-e.getTime())/864e5;return t/365>0?Math.round(t/365)+" years ago":365-t>0?365-t+" days ago":((new Date).getTime()-e.getTime())/36e5+" hours ago"}},g=function(e){var t=0,s=e||{},c=s.message,n=void 0===c?{}:c,i=s.messageIdx,l=void 0===i?"":i,d=s.listPosition,u=void 0===d?"":d,b=s.updateMessageDetails,g=void 0===b?function(){}:b,v=n||{},f=v.author,x=void 0===f?{}:f,p=v.content,N=void 0===p?"":p,D=v.updated,M=void 0===D?"":D,S=x||{},y=S.name,T=void 0===y?"":y,k=S.photoUrl,C=void 0===k?"":k,w=Object(a.useState)(!1),E=Object(r.a)(w,2),I=E[0],P=E[1],F=Object(a.useState)(!1),U=Object(r.a)(F,2),A=U[0],H=U[1],L=Object(a.useState)(!1),B=Object(r.a)(L,2),J=B[0],X=B[1],Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&((null===e||void 0===e?void 0:e.hideOnly)?J&&X(!1):J?g({messageID:n.id,isDelete:!0,listPosition:u}):(n.author.name=e.author,n.content=e.content,g(Object(o.a)(Object(o.a)({},n),{},{messageIdx:l,listPosition:u})))),H((function(e){return!e})),I&&P(!1)},R=Object(a.useMemo)((function(){return Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("div",{className:"card-header",children:[Object(m.jsx)("img",{src:"".concat(j).concat(C),alt:"Avatar",className:"avatar"}),Object(m.jsxs)("div",{className:"card-title",children:[Object(m.jsx)("h6",{className:"full-name",children:T}),Object(m.jsx)("p",{className:"published-date",children:h.getUpdatedDays(new Date(M))})]})]}),Object(m.jsx)("div",{className:"card-content",children:N})]})}),[n]),W=[{name:"Edit",key:"edit",icon:"edit",method:function(){P(!0),Y()}},{name:"Delete",key:"delete",icon:"delete",method:function(){X(!0),Y()}}];return Object(m.jsxs)(m.Fragment,{children:[A&&Object(m.jsx)(O,{isDelete:J,toggleModal:Y,author:T,content:N}),Object(m.jsxs)("div",{className:"card ".concat(I?"card-action":""),onDoubleClick:function(){P((function(e){return!e}))},onTouchStart:function(e){t=e.touches[0].screenX},onTouchEnd:function(e){var s=e.changedTouches[0].screenX;s>t+60?P(!0):t>s+60&&P(!1)},children:[I&&Object(m.jsx)("div",{className:"wrap-action-btn",children:null===W||void 0===W?void 0:W.map((function(e){var t=e||{},s=t.name,a=void 0===s?"":s,c=t.key,n=void 0===c?"":c,i=t.icon,o=void 0===i?"":i,l=t.method,d=void 0===l?function(){}:l;return Object(m.jsxs)("div",{className:"action-btn ".concat(n),onClick:d,children:[Object(m.jsx)("span",{className:"action-text",children:a}),Object(m.jsx)("span",{className:"rotate-270",children:Object(m.jsx)("i",{className:"material-icons",children:o})})]},n)}))}),R]})]})},v=["messages"],f=function(e){var t=e.messages,s=Object(l.a)(e,v);return t.map((function(e,t){return Object(m.jsx)(g,Object(o.a)({message:e,messageIdx:t},s),e.id)}))},x=function(e){return Object(m.jsx)("div",{className:"toast-msg "+e.toastMessageClass,children:Object(m.jsx)("div",{className:e.toastMessageClass,children:e.toastMessage})})},p=function(){return Array.from({length:10},(function(e,t){return Object(m.jsx)("div",{className:"card ",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("div",{className:"card-header",children:[Object(m.jsx)("span",{className:"avatar linear-background"}),Object(m.jsxs)("div",{className:"card-title",children:[Object(m.jsx)("h6",{className:"full-name linear-background"}),Object(m.jsx)("p",{className:"published-date linear-background"})]})]}),Object(m.jsx)("div",{className:"card-content linear-background"})]})},t)}))},N=["messageID","messageIdx","listPosition","isDelete"],D=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(""),i=Object(r.a)(n,2),u=i[0],j=i[1],O=Object(a.useState)(!1),h=Object(r.a)(O,2),g=h[0],v=h[1],D=Object(a.useState)(0),M=Object(r.a)(D,2),S=M[0],y=M[1],T=Object(a.useState)(!1),k=Object(r.a)(T,2),C=k[0],w=k[1],E=Object(a.useState)({}),I=Object(r.a)(E,2),P=I[0],F=I[1],U=Object(a.useState)(!0),A=Object(r.a)(U,2),H=A[0],L=A[1],B={limit:10};u&&(B.pageToken=u,B.limit=100),window.onscroll=function(){J()};var J=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-S&&(g||(v(!0),X()))},X=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];b.get("",{params:B}).then((function(n){if(200===n.status){var i=n.data,o=i.messages,l=i.pageToken;a&&y(10*document.documentElement.offsetHeight/2);var r=[].concat(Object(d.a)(s),[o]);t?(L(!1),c(r),B.pageToken=l,B.limit=100,e(!1,!0)):(v(!1),j(l),c((function(e){return[].concat(Object(d.a)(e),[o])})))}})).catch((function(e){console.log(e)}))},Y=function(e){var t=e.messageID,a=e.messageIdx,n=e.listPosition,i=e.isDelete,r=Object(l.a)(e,N),u=Object(d.a)(s),j=Object(d.a)(u[n]);w(!0),i?(j=j.filter((function(e){return e.id!=t})),F({toastMessageClass:"delete-toast",toastMessage:"Message Deleted Successfully"}),J()):(j[a]=Object(o.a)({},r),F({toastMessageClass:"success-toast",toastMessage:"Message Updated Successfully"})),u[n]=j,c(u)};return Object(a.useEffect)((function(){X(!0)}),[]),Object(a.useEffect)((function(){var e;return C&&setTimeout((function(){e=w(!1)}),3e3),function(){clearTimeout(e)}}),[C]),Object(m.jsxs)("section",{className:"feed-section",children:[H&&Object(m.jsx)(p,{}),!H&&(null===s||void 0===s?void 0:s.map((function(e,t){return Object(m.jsx)(f,{messages:e,listPosition:t,updateMessageDetails:Y},t)}))),C&&Object(m.jsx)(x,Object(o.a)({},P))]})},M=function(){return Object(m.jsxs)("header",{children:[Object(m.jsx)("span",{className:"material-icons-outlined menu-mobile-icon",children:"menu"}),Object(m.jsx)("span",{className:"menu-tilte",children:"Messages"})]})};var S=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(M,{}),Object(m.jsx)(D,{})]})},y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,47)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),c(e),n(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(S,{})}),document.getElementById("root")),y()}},[[46,1,2]]]);
//# sourceMappingURL=main.b658bf13.chunk.js.map