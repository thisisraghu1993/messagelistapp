(this.webpackJsonpmessagelistapp=this.webpackJsonpmessagelistapp||[]).push([[0],{25:function(e,t,s){},46:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(19),i=s.n(n),o=(s(25),s(4)),l=s(8),d=s(6),r=s(2),u=s(20),j="https://message-list.appspot.com",m=s.n(u).a.create({baseURL:"".concat(j,"/messages")}),b=s(0),O=function(e){var t=Object(a.useState)(e.author),s=Object(r.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)(e.content),o=Object(r.a)(i,2),l=o[0],d=o[1];return Object(b.jsx)("div",{id:"myModal",className:"modal",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsx)("span",{className:"material-icons close",onClick:function(){return e.toggleModal({hideOnly:!0})},children:"close"}),Object(b.jsx)("div",{className:"modal-header",children:Object(b.jsx)("h2",{children:e.isDelete?"Delete Message":"Edit Message"})}),e.isDelete?Object(b.jsx)("div",{className:"modal-body",children:Object(b.jsx)("h4",{children:"Are You Sure You Want To Delete This Message?"})}):Object(b.jsxs)("div",{className:"modal-body",children:[Object(b.jsx)("div",{className:"input-box",children:Object(b.jsx)("input",{placeholder:"Edit Author Name",value:c,onChange:function(e){return n(e.target.value)}})}),Object(b.jsx)("div",{className:"input-box",children:Object(b.jsx)("textarea",{placeholder:"Edit Content",rows:"8",cols:"400",value:l,onChange:function(e){return d(e.target.value)}})})]}),Object(b.jsx)("div",{className:"modal-footer",children:Object(b.jsx)("button",{onClick:function(){e.isDelete?e.toggleModal({delete:!0}):e.toggleModal({content:l,author:c})},children:"Submit"})})]})})},h=function(e){var t=0,s=e||{},c=s.message,n=void 0===c?{}:c,i=s.messageIdx,l=void 0===i?"":i,d=s.listPosition,u=void 0===d?"":d,m=s.updateMessageDetails,h=void 0===m?function(){}:m,g=n||{},v=g.author,f=void 0===v?{}:v,x=g.content,p=void 0===x?"":x,N=g.updated,M=void 0===N?"":N,D=f||{},S=D.name,T=void 0===S?"":S,y=D.photoUrl,C=void 0===y?"":y,k=Object(a.useState)(!1),w=Object(r.a)(k,2),E=w[0],I=w[1],P=Object(a.useState)(!1),F=Object(r.a)(P,2),A=F[0],H=F[1],L=Object(a.useState)(!1),U=Object(r.a)(L,2),B=U[0],J=U[1],X=function(e){var t=((new Date).getTime()-e.getTime())/864e5;return t/365>0?Math.round(t/365)+" years ago":365-t>0?365-t+" days ago":((new Date).getTime()-e.getTime())/36e5+" hours ago"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(e.hideOnly?B&&J(!1):B?h({messageID:n.id,isDelete:!0,listPosition:u}):(n.author.name=e.author,n.content=e.content,h(Object(o.a)(Object(o.a)({},n),{},{messageIdx:l,listPosition:u})))),H((function(e){return!e})),E&&I(!1)},R=Object(a.useMemo)((function(){return Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("div",{className:"card-header",children:[Object(b.jsx)("img",{src:"".concat(j).concat(C),alt:"Avatar",className:"avatar"}),Object(b.jsxs)("div",{className:"card-title",children:[Object(b.jsx)("h6",{className:"full-name",children:T}),Object(b.jsx)("p",{className:"published-date",children:X(new Date(M))})]})]}),Object(b.jsx)("div",{className:"card-content",children:p})]})}),[e.message]),W=[{name:"Edit",key:"edit",icon:"edit",method:function(){I(!0),Y()}},{name:"Delete",key:"delete",icon:"delete",method:function(){J(!0),Y()}}];return Object(b.jsxs)(b.Fragment,{children:[A&&Object(b.jsx)(O,{isDelete:B,toggleModal:Y,author:T,content:p}),Object(b.jsxs)("div",{className:"card ".concat(E?"card-action":""),onDoubleClick:function(){I((function(e){return!e}))},onTouchStart:function(e){t=e.touches[0].screenX},onTouchEnd:function(e){var s=e.changedTouches[0].screenX;s>t+60?I(!0):t>s+60&&I(!1)},children:[E&&Object(b.jsx)("div",{className:"wrap-action-btn",children:null===W||void 0===W?void 0:W.map((function(e){var t=e||{},s=t.name,a=void 0===s?"":s,c=t.key,n=void 0===c?"":c,i=t.icon,o=void 0===i?"":i,l=t.method,d=void 0===l?function(){}:l;return Object(b.jsxs)("div",{className:"action-btn ".concat(n),onClick:d,children:[Object(b.jsx)("span",{className:"action-text",children:a}),Object(b.jsx)("span",{className:"rotate-270",children:Object(b.jsx)("i",{className:"material-icons",children:o})})]},n)}))}),R]})]})},g=["messages"],v=function(e){var t=e.messages,s=Object(l.a)(e,g);return t.map((function(e,t){return Object(b.jsx)(h,Object(o.a)({message:e,messageIdx:t},s),e.id)}))},f=function(e){return Object(b.jsx)("div",{className:"toast-msg "+e.toastMessageClass,children:Object(b.jsx)("div",{className:e.toastMessageClass,children:e.toastMessage})})},x=["messageID","messageIdx","listPosition","isDelete"],p=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(""),i=Object(r.a)(n,2),u=i[0],j=i[1],O=Object(a.useState)(!1),h=Object(r.a)(O,2),g=h[0],p=h[1],N=Object(a.useState)(0),M=Object(r.a)(N,2),D=M[0],S=M[1],T=Object(a.useState)(!1),y=Object(r.a)(T,2),C=y[0],k=y[1],w=Object(a.useState)({}),E=Object(r.a)(w,2),I=E[0],P=E[1],F={limit:10};u&&(F.pageToken=u,F.limit=100),window.onscroll=function(){A()},Object(a.useEffect)((function(){H(!0)}),[]),Object(a.useEffect)((function(){var e;return C&&setTimeout((function(){e=k(!1)}),3e3),function(){clearTimeout(e)}}),[C]);var A=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-D&&(g||(p(!0),H()))},H=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m.get("",{params:F}).then((function(n){if(200===n.status){var i=n.data,o=i.messages,l=i.pageToken;a&&S(10*document.documentElement.offsetHeight/2);var r=[].concat(Object(d.a)(s),[o]);t?(c(r),F.pageToken=l,F.limit=100,e(!1,!0)):(p(!1),j(l),c((function(e){return[].concat(Object(d.a)(e),[o])})))}})).catch((function(e){console.log(e)}))},L=function(e){var t=e.messageID,a=e.messageIdx,n=e.listPosition,i=e.isDelete,r=Object(l.a)(e,x),u=Object(d.a)(s),j=Object(d.a)(u[n]);k(!0),i?(j=j.filter((function(e){return e.id!=t})),P({toastMessageClass:"delete-toast",toastMessage:"Message Deleted Successfully"}),A()):(j[a]=Object(o.a)({},r),P({toastMessageClass:"success-toast",toastMessage:"Message Updated Successfully"})),u[n]=j,c(u)};return Object(b.jsxs)("section",{className:"feed-section",children:[null===s||void 0===s?void 0:s.map((function(e,t){return Object(b.jsx)(v,{messages:e,listPosition:t,updateMessageDetails:L},t)})),C?Object(b.jsx)(f,Object(o.a)({},I)):null]})},N=function(){return Object(b.jsxs)("header",{children:[Object(b.jsx)("span",{className:"material-icons-outlined menu-mobile-icon",children:"menu"}),Object(b.jsx)("span",{className:"menu-tilte",children:"Messages"})]})};var M=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(N,{}),Object(b.jsx)(p,{})]})},D=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,47)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),c(e),n(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root")),D()}},[[46,1,2]]]);
//# sourceMappingURL=main.93ebcc8d.chunk.js.map