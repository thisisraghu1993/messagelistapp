(this.webpackJsonpmessagelistapp=this.webpackJsonpmessagelistapp||[]).push([[0],{25:function(e,t,s){},46:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(19),i=s.n(n),o=(s(25),s(4)),l=s(8),d=s(6),r=s(2),u=s(20),j=s.n(u).a.create({baseURL:"http://message-list.appspot.com/messages"}),m=s(0),b=function(e){var t=Object(a.useState)(e.author),s=Object(r.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)(e.content),o=Object(r.a)(i,2),l=o[0],d=o[1];return Object(m.jsx)("div",{id:"myModal",className:"modal",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsx)("span",{className:"material-icons close",onClick:function(){return e.toggleModal({hideOnly:!0})},children:"close"}),Object(m.jsx)("div",{className:"modal-header",children:Object(m.jsx)("h2",{children:e.isDelete?"Delete Message":"Edit Message"})}),e.isDelete?Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("h4",{children:"Are You Sure You Want To Delete This Message?"})}):Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("div",{className:"input-box",children:Object(m.jsx)("input",{placeholder:"Edit Author Name",value:c,onChange:function(e){return n(e.target.value)}})}),Object(m.jsx)("div",{className:"input-box",children:Object(m.jsx)("textarea",{placeholder:"Edit Content",rows:"8",cols:"400",value:l,onChange:function(e){return d(e.target.value)}})})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{onClick:function(){e.isDelete?e.toggleModal({delete:!0}):e.toggleModal({content:l,author:c})},children:"Submit"})})]})})},O=function(e){var t=0,s=e||{},c=s.message,n=void 0===c?{}:c,i=s.messageIdx,l=void 0===i?"":i,d=s.listPosition,u=void 0===d?"":d,j=s.updateMessageDetails,O=void 0===j?function(){}:j,h=n||{},g=h.author,v=void 0===g?{}:g,f=h.content,x=void 0===f?"":f,p=h.updated,N=void 0===p?"":p,M=v||{},D=M.name,S=void 0===D?"":D,T=M.photoUrl,y=void 0===T?"":T,C=Object(a.useState)(!1),k=Object(r.a)(C,2),w=k[0],E=k[1],I=Object(a.useState)(!1),P=Object(r.a)(I,2),F=P[0],A=P[1],H=Object(a.useState)(!1),L=Object(r.a)(H,2),U=L[0],B=L[1],J=function(e){var t=((new Date).getTime()-e.getTime())/864e5;return t/365>0?Math.round(t/365)+" years ago":365-t>0?365-t+" days ago":((new Date).getTime()-e.getTime())/36e5+" hours ago"},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(e.hideOnly?U&&B(!1):U?O({messageID:n.id,isDelete:!0,listPosition:u}):(n.author.name=e.author,n.content=e.content,O(Object(o.a)(Object(o.a)({},n),{},{messageIdx:l,listPosition:u})))),A((function(e){return!e})),w&&E(!1)},Y=Object(a.useMemo)((function(){return Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("div",{className:"card-header",children:[Object(m.jsx)("img",{src:"".concat("https://message-list.appspot.com").concat(y),alt:"Avatar",className:"avatar"}),Object(m.jsxs)("div",{className:"card-title",children:[Object(m.jsx)("h6",{className:"full-name",children:S}),Object(m.jsx)("p",{className:"published-date",children:J(new Date(N))})]})]}),Object(m.jsx)("div",{className:"card-content",children:x})]})}),[e.message]),R=[{name:"Edit",key:"edit",icon:"edit",method:function(){E(!0),X()}},{name:"Delete",key:"delete",icon:"delete",method:function(){B(!0),X()}}];return Object(m.jsxs)(m.Fragment,{children:[F&&Object(m.jsx)(b,{isDelete:U,toggleModal:X,author:S,content:x}),Object(m.jsxs)("div",{className:"card ".concat(w?"card-action":""),onDoubleClick:function(){E((function(e){return!e}))},onTouchStart:function(e){t=e.touches[0].screenX},onTouchEnd:function(e){var s=e.changedTouches[0].screenX;s>t+30?E(!0):t>s+30&&E(!1)},children:[w&&Object(m.jsx)("div",{className:"wrap-action-btn",children:null===R||void 0===R?void 0:R.map((function(e){var t=e||{},s=t.name,a=void 0===s?"":s,c=t.key,n=void 0===c?"":c,i=t.icon,o=void 0===i?"":i,l=t.method,d=void 0===l?function(){}:l;return Object(m.jsxs)("div",{className:"action-btn ".concat(n),onClick:d,children:[Object(m.jsx)("span",{className:"action-text",children:a}),Object(m.jsx)("span",{className:"rotate-270",children:Object(m.jsx)("i",{className:"material-icons",children:o})})]},n)}))}),Y]})]})},h=["messages"],g=function(e){var t=e.messages,s=Object(l.a)(e,h);return t.map((function(e,t){return Object(m.jsx)(O,Object(o.a)({message:e,messageIdx:t},s),e.id)}))},v=function(e){return Object(m.jsx)("div",{className:"toast-msg "+e.toastMessageClass,children:Object(m.jsx)("div",{className:e.toastMessageClass,children:e.toastMessage})})},f=["messageID","messageIdx","listPosition","isDelete"],x=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(""),i=Object(r.a)(n,2),u=i[0],b=i[1],O=Object(a.useState)(!1),h=Object(r.a)(O,2),x=h[0],p=h[1],N=Object(a.useState)(0),M=Object(r.a)(N,2),D=M[0],S=M[1],T=Object(a.useState)(!1),y=Object(r.a)(T,2),C=y[0],k=y[1],w=Object(a.useState)({}),E=Object(r.a)(w,2),I=E[0],P=E[1],F={limit:10};u&&(F.pageToken=u,F.limit=100),window.onscroll=function(){A()},Object(a.useEffect)((function(){H(!0)}),[]),Object(a.useEffect)((function(){var e;return C&&setTimeout((function(){e=k(!1)}),3e3),function(){clearTimeout(e)}}),[C]);var A=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-D&&(x||(p(!0),H()))},H=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];j.get("",{params:F}).then((function(n){if(200===n.status){var i=n.data,o=i.messages,l=i.pageToken;a&&S(10*document.documentElement.offsetHeight/2);var r=[].concat(Object(d.a)(s),[o]);t?(c(r),F.pageToken=l,F.limit=100,e(!1,!0)):(p(!1),b(l),c((function(e){return[].concat(Object(d.a)(e),[o])})))}})).catch((function(e){console.log(e)}))},L=function(e){var t=e.messageID,a=e.messageIdx,n=e.listPosition,i=e.isDelete,r=Object(l.a)(e,f),u=Object(d.a)(s),j=Object(d.a)(u[n]);k(!0),i?(j=j.filter((function(e){return e.id!=t})),P({toastMessageClass:"delete-toast",toastMessage:"Message Deleted Successfully"}),A()):(j[a]=Object(o.a)({},r),P({toastMessageClass:"success-toast",toastMessage:"Message Updated Successfully"})),u[n]=j,c(u)};return Object(m.jsxs)("section",{className:"feed-section",children:[null===s||void 0===s?void 0:s.map((function(e,t){return Object(m.jsx)(g,{messages:e,listPosition:t,updateMessageDetails:L},t)})),C?Object(m.jsx)(v,Object(o.a)({},I)):null]})},p=function(){return Object(m.jsxs)("header",{children:[Object(m.jsx)("span",{className:"material-icons-outlined menu-mobile-icon",children:"menu"}),Object(m.jsx)("span",{className:"menu-tilte",children:"Messages"})]})};var N=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{}),Object(m.jsx)(x,{})]})},M=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,47)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),c(e),n(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root")),M()}},[[46,1,2]]]);
//# sourceMappingURL=main.82a4ce85.chunk.js.map